

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Buy-Side Request/Response Service &mdash; EMSX API Programmers Guide 2.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Sell-Side Request/Response Service" href="requestResponseSs.html" />
    <link rel="prev" title="Description of Request/Response Service" href="description.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> EMSX API Programmers Guide
          

          
          </a>

          
            
            
              <div class="version">
                2.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/index.html">Server Side EMSX API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Programmable EMSX API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="emsxFeatures.html">EMSX Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="emsxFeatures.html#emsx-teams">EMSX Teams</a></li>
<li class="toctree-l2"><a class="reference internal" href="emsxFeatures.html#emsx-element-definitions">EMSX Element Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="emsxFeatures.html#emsx-element-definition-a-to-m">EMSX Element Definition (A to M)</a></li>
<li class="toctree-l2"><a class="reference internal" href="emsxFeatures.html#multi-leg-element-definition">Multi-Leg Element Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="emsxFeatures.html#emsx-element-definition-n-to-z">EMSX Element Definition (N to Z)</a></li>
<li class="toctree-l2"><a class="reference internal" href="testEnv.html">Accessing the Test Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="testEnv.html#api-demo-tool">API Demo Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="stateDiagram.html">Order State Diagram</a></li>
<li class="toctree-l2"><a class="reference internal" href="stateDiagram.html#route-state-diagram">Route State Diagram</a></li>
<li class="toctree-l2"><a class="reference internal" href="stateDiagram.html#emsx-api-schema">EMSX API Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="stateDiagram.html#emsx-api-history-service-schema">EMSX API History Service Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="session.html">Session Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="description.html">Description of Request/Response Service</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Buy-Side Request/Response Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#assign-trader-request">Assign Trader Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#broker-spec-request">Broker Spec Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cancel-order-extended-request">Cancel Order Extended Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cancel-route-extended-request">Cancel Route Extended Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-basket-request">Create Basket Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-order-request">Create Order Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-order-and-route-extended-request">Create Order and Route Extended Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-order-and-route-manually-request">Create Order And Route Manually Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-order-request">Delete Order Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-all-field-metadata-request">Get All Field Metadata Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-broker-strategies-with-asset-class-request">Get Broker Strategies with Asset Class Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-broker-strategy-info-with-asset-class-request">Get Broker Strategy Info with Asset Class Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-brokers-with-asset-class-request">Get Brokers with Asset Class Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-field-metadata-request">Get Field Metadata Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-teams-request">Get Teams Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-trade-desks-request">Get Trade Desks Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-traders-request">Get Traders Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#group-route-extended-request">Group Route Extended Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#group-route-extended-request-multi-leg-options">Group Route Extended Request - Multi-Leg Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#group-route-extended-request-route-as-spread">Group Route Extended Request - Route As Spread</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manual-fill-request">Manual Fill Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modify-order-extended-request">Modify Order Extended Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modify-route-extended-request">Modify Route Extended Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#route-extended-request">Route Extended Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#route-manually-extended-request">Route Manually Extended Request</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="requestResponseSs.html">Sell-Side Request/Response Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="emsxSubscription.html">EMSX Subscription</a></li>
<li class="toctree-l2"><a class="reference internal" href="emsxHistory.html">EMSX History Request</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mifid2.html">MiFID II</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other.html">IOI API Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EMSX API Programmers Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Programmable EMSX API</a> &raquo;</li>
        
      <li>Buy-Side Request/Response Service</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/programmable/requestResponse.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="buy-side-request-response-service">
<h1>Buy-Side Request/Response Service<a class="headerlink" href="#buy-side-request-response-service" title="Permalink to this headline">Â¶</a></h1>
<p>The EMSX API allows developers to use the Request/Response services for order and route creation, modification,
queries related to orders and routes as well as EMSX Team details. Depending on the type of action required, the
application programmer must create a specific request, populate it with required parameters and send that request to
the EMSX API service, which provides the response. Communication with the request/response service requires the
following steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Create a session (if session does not yet exist).</li>
<li>Connect session to <code class="docutils literal notranslate"><span class="pre">//blp/emapisvc_beta</span></code> or <code class="docutils literal notranslate"><span class="pre">//blp/emapisvc</span></code> service and start it.</li>
<li>Fetch a service object from the session representing emapisvc.</li>
<li>Use the service object from above to create a Request object of the desired type</li>
<li>Send request object via sendRequest method of session object, pass object of type EventQueue to the sendRequest.</li>
<li>Loop through the EventQueue object until event of type <code class="docutils literal notranslate"><span class="pre">Event::RESPONSE</span></code> is read.</li>
</ol>
</div></blockquote>
<p>These are initialized in the constructor as below and are then available for the life of the application for submission of various requests.</p>
<div class="section" id="assign-trader-request">
<h2>Assign Trader Request<a class="headerlink" href="#assign-trader-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">AssignTrader</span></code> request allows EMSX API to reassign order to another user UUID. A typical setup will have the different UUID as another part of the TEAM setup for the order creater UUID. This will allow systematically generated trades to be reassigned to another human trader if need be from the EMSX API.</p>
<p>Assigned trader must be in same <code class="docutils literal notranslate"><span class="pre">EMBR&lt;GO&gt;</span></code> group for this to work. <code class="docutils literal notranslate"><span class="pre">EMBR&lt;GO&gt;</span></code> is an internal Bloomberg function the account managers will use to set this feature on behalf of the client. The EMSX account manager will check off the ability to reassign before the <code class="docutils literal notranslate"><span class="pre">AssignTrader</span></code> request will work. Once this feature is on, trading on behalf other UUID feature will no longer work for that team.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="31%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/AssignTrader.cpp">Assign Trader cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/AssignTrader.cs">Assign Trader cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/AssignTrader.cls">Assign Trader vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/AssignTrader.java">Assign Trader java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/AssignTrader.py">Assign Trader py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;AssignTrader&quot;</span><span class="p">)</span>

             <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3744303</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3744341</span><span class="p">)</span>

             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ASSIGNEE_TRADER_UUID&quot;</span><span class="p">,</span> <span class="mi">12109783</span><span class="p">)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Output:- Without proper <code class="docutils literal notranslate"><span class="pre">EMBR&lt;GO&gt;</span></code> permssion.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\tckim\OneDrive\_scripts&gt;py -3 AssignTrader.py
Bloomberg - EMSX API Example - AssignTrader
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: AssignTrader = {
    EMSX_SEQUENCE[] = {
        4733955
    }
    EMSX_ASSIGNEE_TRADER_UUID = 7569479
}

Processing RESPONSE event
MESSAGE: ErrorInfo = {
    ERROR_CODE = 96233
    ERROR_MESSAGE = &quot;Not Authorized&quot;
}

CORRELATION ID: 3
MESSAGE TYPE: ErrorInfo
ERROR CODE: 96233       ERROR MESSAGE: Not Authorized
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="broker-spec-request">
<h2>Broker Spec Request<a class="headerlink" href="#broker-spec-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">BrokerSpec</span></code> request allows EMSX API users to call all the production broker strategy name and fields and FIX tags
associated with the broker strategies. Unfortunately, this is currently only available for production broker strategy
fields. The service name is <code class="docutils literal notranslate"><span class="pre">\\blp\emsx.brokerspec</span></code>.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="31%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/BrokerSpec.cpp">Broker Spec cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/BrokerSpec.cs">Broker Spec cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/BrokerSpec.cls">Broker Spec vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/AssignTrader.java">Broker Spec java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/BrokerSpec.py">Broker Spec py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>Call <code class="docutils literal notranslate"><span class="pre">//blp/emsx.brokerspec</span></code> service:-</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SESSION_STARTED</span>         <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s2">&quot;SessionStarted&quot;</span><span class="p">)</span>
<span class="n">SESSION_STARTUP_FAILURE</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s2">&quot;SessionStartupFailure&quot;</span><span class="p">)</span>
<span class="n">SERVICE_OPENED</span>          <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s2">&quot;ServiceOpened&quot;</span><span class="p">)</span>
<span class="n">SERVICE_OPEN_FAILURE</span>    <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s2">&quot;ServiceOpenFailure&quot;</span><span class="p">)</span>
<span class="n">ERROR_INFO</span>              <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s2">&quot;ErrorInfo&quot;</span><span class="p">)</span>
<span class="n">BROKER_SPEC</span>             <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s2">&quot;BrokerSpec&quot;</span><span class="p">)</span>

<span class="n">d_service</span><span class="o">=</span><span class="s2">&quot;//blp/emsx.brokerspec&quot;</span> <span class="c1"># The BrokerSpec service is only available in the production environment</span>
<span class="n">d_host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span>
<span class="n">d_port</span><span class="o">=</span><span class="mi">8194</span>
<span class="n">bEnd</span><span class="o">=</span><span class="bp">False</span>
</pre></div>
</div>
<p>Specify the UUID:-</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetBrokerSpecForUuid&quot;</span><span class="p">)</span>

            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="mi">8049857</span><span class="p">)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
<p>Get broker code, strategy name, and strategy parameters</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">brokers</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;brokers&quot;</span><span class="p">)</span>

<span class="n">num</span> <span class="o">=</span> <span class="n">brokers</span><span class="o">.</span><span class="n">numValues</span><span class="p">()</span>

<span class="k">print</span> <span class="s2">&quot;Number of Brokers: </span><span class="si">%d</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">num</span><span class="p">)</span>

<span class="k">for</span> <span class="n">broker</span> <span class="ow">in</span> <span class="n">brokers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">code</span> <span class="o">=</span> <span class="n">broker</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
    <span class="n">assetClass</span> <span class="o">=</span> <span class="n">broker</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;assetClass&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">broker</span><span class="o">.</span><span class="n">hasElement</span><span class="p">(</span><span class="s2">&quot;strategyFixTag&quot;</span><span class="p">):</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="n">broker</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;strategyFixTag&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Broker code: </span><span class="si">%s</span><span class="se">\t</span><span class="s2">class: </span><span class="si">%s</span><span class="se">\t</span><span class="s2">tag: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">code</span><span class="p">,</span><span class="n">assetClass</span><span class="p">,</span><span class="n">tag</span><span class="p">)</span>
        <span class="n">strats</span> <span class="o">=</span> <span class="n">broker</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;strategies&quot;</span><span class="p">)</span>
        <span class="n">numStrats</span> <span class="o">=</span> <span class="n">strats</span><span class="o">.</span><span class="n">numValues</span><span class="p">()</span>
        <span class="k">print</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">No. of Strategies: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">numStrats</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">strat</span> <span class="ow">in</span> <span class="n">strats</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">strat</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
            <span class="n">fixVal</span> <span class="o">=</span> <span class="n">strat</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;fixValue&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
            <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\n\t</span><span class="s2">Strategy Name: </span><span class="si">%s</span><span class="se">\t</span><span class="s2">Fix Value: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">fixVal</span><span class="p">)</span>

            <span class="n">parameters</span> <span class="o">=</span> <span class="n">strat</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;parameters&quot;</span><span class="p">)</span>

            <span class="n">numParams</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">numValues</span><span class="p">()</span>

            <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">No. of Parameters: </span><span class="si">%d</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">numParams</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">parameters</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">pname</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;fixTag&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
                <span class="n">required</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;isRequired&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
                <span class="n">replaceable</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;isReplaceable&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
                <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Parameter: </span><span class="si">%s</span><span class="se">\t</span><span class="s2">Tag: </span><span class="si">%d</span><span class="se">\t</span><span class="s2">Required: </span><span class="si">%s</span><span class="se">\t</span><span class="s2">Replaceable: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pname</span><span class="p">,</span><span class="n">tag</span><span class="p">,</span><span class="n">required</span><span class="p">,</span><span class="n">replaceable</span><span class="p">)</span>

                <span class="n">typeName</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>

                <span class="n">vals</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                <span class="k">if</span> <span class="n">typeName</span><span class="o">==</span><span class="s2">&quot;enumeration&quot;</span><span class="p">:</span>

                    <span class="n">enumerators</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;enumerators&quot;</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">enum</span> <span class="ow">in</span> <span class="n">enumerators</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                        <span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span> <span class="o">+</span> <span class="n">enum</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="n">enum</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;fixValue&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;],&quot;</span>

                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>


                <span class="k">elif</span> <span class="n">typeName</span><span class="o">==</span><span class="s2">&quot;range&quot;</span><span class="p">:</span>
                    <span class="n">rng</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">mn</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;min&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
                    <span class="n">mx</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;max&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
                    <span class="n">st</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;step&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
                    <span class="n">vals</span> <span class="o">=</span> <span class="s2">&quot;min:</span><span class="si">%d</span><span class="s2"> max:</span><span class="si">%d</span><span class="s2"> step:</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mn</span><span class="p">,</span><span class="n">mx</span><span class="p">,</span><span class="n">st</span><span class="p">)</span>


                <span class="k">elif</span> <span class="n">typeName</span><span class="o">==</span><span class="s2">&quot;string&quot;</span><span class="p">:</span>
                    <span class="n">possVals</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;possibleValues&quot;</span><span class="p">)</span>


                    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">possVals</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                        <span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span> <span class="o">+</span> <span class="n">val</span> <span class="o">+</span><span class="s2">&quot;,&quot;</span>

                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>


                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t\t\t</span><span class="s2">Type: </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">typeName</span><span class="p">,</span> <span class="n">vals</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t\t\t</span><span class="s2">Type: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">typeName</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Broker code: </span><span class="si">%s</span><span class="se">\t</span><span class="s2">class: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">code</span><span class="p">,</span><span class="n">assetClass</span><span class="p">)</span>
        <span class="k">print</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">No strategies</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 BrokerSpec.py
Bloomberg - EMSX API Example - BrokerSpec
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: GetBrokerSpecForUuid = {
    uuid = 6767714
}

Processing RESPONSE event
MESSAGE TYPE: BrokerSpec
Number of Brokers: 20


Broker code: BB class: Equity   tag: 9002
        No. of Strategies: 10

        Strategy Name: NONE     Fix Value: NONE
                No. of Parameters: 0


        Strategy Name: VWAP     Fix Value: VWAP
                No. of Parameters: 0


        Strategy Name: PARTICIPATE      Fix Value: PART
                No. of Parameters: 0


        Strategy Name: INLINE   Fix Value: INLINE
                No. of Parameters: 0


        Strategy Name: ARRIVAL PRICE    Fix Value: ARRP
                No. of Parameters: 0


        Strategy Name: BIPS     Fix Value: 2
                No. of Parameters: 0


        Strategy Name: EP_PE    Fix Value: EP
                No. of Parameters: 0


        Strategy Name: PAIRS STRATEGY   Fix Value: PAIR
                No. of Parameters: 0


        Strategy Name: BEST EX  Fix Value: BEST-EX
                No. of Parameters: 0


        Strategy Name: ratest   Fix Value: ratest
                No. of Parameters: 0

        Time In Force:
                Name: DAY       Fix Value: 0
                Name: FOK       Fix Value: 4
                Name: GTC       Fix Value: 1
                Name: GTD       Fix Value: 6

        Order Types:
                Name: LMT       Fix Value: 2
                Name: MKT       Fix Value: 1
                Name: SL        Fix Value: 4
                Name: ST        Fix Value: 3

        Handling Instructions:
                Name: ANY       Fix Value: 2
                Name: Auto      Fix Value: 1
                Name: DMA       Fix Value: 4
                Name: MAN       Fix Value: 3
                Name: ORD       Fix Value: 0

Broker code: BB class: Option
        No strategies

        Time In Force:
                Name: DAY       Fix Value: 0

        Order Types:
                Name: LMT       Fix Value: 2
                Name: MKT       Fix Value: 1

        Handling Instructions:
                Name: ANY       Fix Value: 2
                Name: AUTO      Fix Value: 1
                Name: MAN       Fix Value: 3

Broker code: EFIX       class: Equity   tag: 6005
        No. of Strategies: 53

        Strategy Name: TSTRIKE1 Fix Value: 2
                No. of Parameters: 0


        Strategy Name: INLINE   Fix Value: INLINE
                No. of Parameters: 0


        Strategy Name: STRATEGY8        Fix Value: 8
                No. of Parameters: 0


        Strategy Name: STRATEGY9        Fix Value: 9
                No. of Parameters: 0


        Strategy Name: STRATEGY10       Fix Value: 10
                No. of Parameters: 0


        Strategy Name: STRATEGY11       Fix Value: 11
                No. of Parameters: 0


        Strategy Name: STRATEGY12       Fix Value: 12
                No. of Parameters: 0


        Strategy Name: STRATEGY13       Fix Value: 13
                No. of Parameters: 0


        Strategy Name: STRATEGY14       Fix Value: 14
                No. of Parameters: 0


        Strategy Name: STRATEGY15       Fix Value: 15
                No. of Parameters: 0


        Strategy Name: STRATEGY16       Fix Value: 16
                No. of Parameters: 0


        Strategy Name: STRATEGY17       Fix Value: 17
                No. of Parameters: 0


        Strategy Name: STRATEGY18       Fix Value: 18
                No. of Parameters: 0


        Strategy Name: STRATEGY19       Fix Value: 19
                No. of Parameters: 0


        Strategy Name: STRATEGY20       Fix Value: 20
                No. of Parameters: 0


        Strategy Name: STRATEGY21       Fix Value: 21
                No. of Parameters: 0


        Strategy Name: STRATEGY22       Fix Value: 22
                No. of Parameters: 0


        Strategy Name: STRATEGY23       Fix Value: 23
                No. of Parameters: 0


        Strategy Name: STRATEGY24       Fix Value: 24
                No. of Parameters: 0


        Strategy Name: STRATEGY25       Fix Value: 25
                No. of Parameters: 0


        Strategy Name: Merge    Fix Value: Merge
                No. of Parameters: 0


        Strategy Name: VWAP     Fix Value: GVW3
                No. of Parameters: 0


        Strategy Name: TWAP     Fix Value: GTW3
                No. of Parameters: 0


        Strategy Name: VP       Fix Value: GVP3
                No. of Parameters: 0


        Strategy Name: VWAP2    Fix Value: 3
                No. of Parameters: 0


        Strategy Name: ABC      Fix Value: 4
                No. of Parameters: 0


        Strategy Name: TIME TEST        Fix Value: 1
                No. of Parameters: 0


        Strategy Name: TIME TEST1       Fix Value: 40
                No. of Parameters: 0


        Strategy Name: strategy 29      Fix Value: L
                No. of Parameters: 0


        Strategy Name: strategy 30      Fix Value: 30
                No. of Parameters: 0


        Strategy Name: ALGOT    Fix Value: TT
                No. of Parameters: 0


        Strategy Name: Mike Sat Morning Fix Value: M3
                No. of Parameters: 0


        Strategy Name: janurary Fix Value: jan
                No. of Parameters: 0


        Strategy Name: test33           Fix Value: 10114
                No. of Parameters: 0


        Strategy Name: iceberg  Fix Value: iceberg
                No. of Parameters: 0


        Strategy Name: Merge2   Fix Value: Merge2
                No. of Parameters: 0


        Strategy Name: testwf   Fix Value: testwf
                No. of Parameters: 0


        Strategy Name: TS Strike        Fix Value: y
                No. of Parameters: 0


        Strategy Name: TS Strike        Fix Value: y
                No. of Parameters: 0


        Strategy Name: strategy 30      Fix Value: 30
                No. of Parameters: 0


        Strategy Name: Strategy 30      Fix Value: 30
                No. of Parameters: 0


        Strategy Name: INLIN    Fix Value: INLINE
                No. of Parameters: 0


        Strategy Name: TS Strike        Fix Value: y
                No. of Parameters: 0


        Strategy Name: Strategy 30      Fix Value: 30
                No. of Parameters: 0


        Strategy Name: SMART    Fix Value: SMART
                No. of Parameters: 0


        Strategy Name: y029test Fix Value: 1029
                No. of Parameters: 0


        Strategy Name: ra_test  Fix Value: ratest
                No. of Parameters: 0


        Strategy Name: DEMO     Fix Value: D
                No. of Parameters: 0


        Strategy Name: A        Fix Value: 2
                No. of Parameters: 0


        Strategy Name: TEST1    Fix Value: T1
                No. of Parameters: 0


        Strategy Name: TEST2    Fix Value: T2
                No. of Parameters: 0


        Strategy Name: TEST3    Fix Value: T3
                No. of Parameters: 0


        Strategy Name: jeff     Fix Value: jeff
                No. of Parameters: 0

        Time In Force:
                Name: CLO       Fix Value: 7
                Name: DAY       Fix Value: 0
                Name: FOK       Fix Value: 4
                Name: GTC       Fix Value: 1
                Name: GTD       Fix Value: 6
                Name: GTX       Fix Value: 5
                Name: IOC       Fix Value: 3
                Name: OPG       Fix Value: A

        Order Types:
                Name: CD        Fix Value: Q
                Name: COVR      Fix Value: F
                Name: FUN       Fix Value: I
                Name: JP        Fix Value: N
                Name: LMT       Fix Value: 2
                Name: LOB       Fix Value: R
                Name: LOC       Fix Value: B
                Name: LOO       Fix Value: 6
                Name: MKT       Fix Value: 1
                Name: MOC       Fix Value: 5
                Name: MOO       Fix Value: X
                Name: OC        Fix Value: A
                Name: PEGG      Fix Value: P
                Name: RED       Fix Value: E
                Name: SL        Fix Value: 4
                Name: ST        Fix Value: 3

        Handling Instructions:
                Name: ANY       Fix Value: 2
                Name: AUTO      Fix Value: 1
                Name: MAN       Fix Value: 3

Broker code: EFIX       class: Future   tag: 1000
        No. of Strategies: 6

        Strategy Name: test 2   Fix Value: 200
                No. of Parameters: 0


        Strategy Name: test     Fix Value: 100
                No. of Parameters: 0


        Strategy Name: time test        Fix Value: time
                No. of Parameters: 0


        Strategy Name: Range test       Fix Value: rng
                No. of Parameters: 0


        Strategy Name: test3    Fix Value: I
                No. of Parameters: 0


        Strategy Name: DEMO     Fix Value: D
                No. of Parameters: 0

        Time In Force:
                Name: DAY       Fix Value: 0
                Name: GTC       Fix Value: 1
                Name: GTD       Fix Value: 6
                Name: GTI       Fix Value: 8
                Name: GTT       Fix Value: 9
                Name: IOC       Fix Value: 3

        Order Types:
                Name: LMT       Fix Value: 2
                Name: MKT       Fix Value: 1
                Name: MOC       Fix Value: 5
                Name: SL        Fix Value: 4
                Name: ST        Fix Value: 3

        Handling Instructions:
                Name: ANY       Fix Value: 2
                Name: AUTO      Fix Value: 1
                Name: DOT       Fix Value: 4
                Name: MAN       Fix Value: 3
...
</pre></div>
</div>
</div>
<div class="section" id="cancel-order-extended-request">
<h2>Cancel Order Extended Request<a class="headerlink" href="#cancel-order-extended-request" title="Permalink to this headline">Â¶</a></h2>
<p>In <code class="docutils literal notranslate"><span class="pre">EMSX&lt;GO&gt;</span></code> there is a feature that allows the user to cancel the parent order and child routes associated with the parent order in a single call. The <code class="docutils literal notranslate"><span class="pre">CancelOrderEx</span></code> request replicates this <code class="docutils literal notranslate"><span class="pre">EMSX&lt;GO&gt;</span></code> UI feature.</p>
<p>However, unlike the <a class="reference external" href="https://emsx-api-doc.readthedocs.io/en/latest/programmable/requestResponse.html#cancel-route-extended-request">CancelRouteEx</a> request which changes the parent order state into <code class="docutils literal notranslate"><span class="pre">Assigned</span></code>, this request will permanently place the order in an inoperable  <code class="docutils literal notranslate"><span class="pre">Cancel</span></code> state.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Please note this request does not work for AIM users. This request only works for standalone EMSX API user.</p>
</div>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="32%" />
<col width="32%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/CancelOrder.cs">Cancel Order cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/CancelOrderEx.py">Cancel Order py</a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
</div>
<div class="section" id="cancel-route-extended-request">
<h2>Cancel Route Extended Request<a class="headerlink" href="#cancel-route-extended-request" title="Permalink to this headline">Â¶</a></h2>
<p>In <code class="docutils literal notranslate"><span class="pre">EMSX&lt;GO&gt;</span></code> we have a notion of parent order and child routes. The <code class="docutils literal notranslate"><span class="pre">CancelRoute</span></code> request is to effectively send out
a cancellation request to the execution venue of the current live route. Submission of <code class="docutils literal notranslate"><span class="pre">CancelRoute</span></code> does not
automatically cancel the outstanding route. This action needs to be acknowledged and performed by the execution venue
of the route.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="32%" />
<col width="32%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/CancelRoute.cpp">Cancel Route cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/CancelRoute.cs">Cancel Route cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/CancelRoute.cls">Cancel Route vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/CancelRoute.java">Cancel Route java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/CancelRoute.py">Cancel Route py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;CancelRoute&quot;</span><span class="p">)</span>

             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>
             <span class="c1">#request.set(&quot;EMSX_TRADER_UUID&quot;, 1234567)        # UUID of trader who owns the order</span>

             <span class="n">routes</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;ROUTES&quot;</span><span class="p">)</span>

             <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span>
             <span class="n">route</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">3744354</span><span class="p">)</span>
             <span class="n">route</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_ROUTE_ID&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\tckim\OneDrive\_scripts&gt;py -3 CancelOrderEx.py
Bloomberg - EMSX API Example - CancelOrderEx
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: CancelOrderEx = {
    EMSX_SEQUENCE[] = {
        4733955
    }
}

Processing RESPONSE event
MESSAGE: CancelOrderEx = {
    STATUS = 1
    MESSAGE = &quot;Order cancellation request sent to broker&quot;
}

CORRELATION ID: 3
MESSAGE TYPE: CancelOrderEx
STATUS: 1       MESSAGE: Order cancellation request sent to broker
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="create-basket-request">
<h2>Create Basket Request<a class="headerlink" href="#create-basket-request" title="Permalink to this headline">Â¶</a></h2>
<p>Creating a basket requires the user to create a request from the service object of type <code class="docutils literal notranslate"><span class="pre">CreateBasket</span></code> and fill in the required fields before submitting the request.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">CreateBasket</span></code> request creates a basket with the list of securities. This maintains a list or a basket from a portfolio perspective.</p>
<p>Currently, in EMSX API this is a two-step process.</p>
<p>The first step is for the user to use <code class="docutils literal notranslate"><span class="pre">CreateOrder</span></code> request to create the orders and capture the <code class="docutils literal notranslate"><span class="pre">EMSX_SEQUENCE</span></code> from the response message.</p>
<p>The second step is to include the <code class="docutils literal notranslate"><span class="pre">EMSX_SEQUENCE</span></code> number inside an array to add the orders into a basket and use the <code class="docutils literal notranslate"><span class="pre">EMSX_BASKET_NAME</span></code> element in the <code class="docutils literal notranslate"><span class="pre">CreateBasket</span></code> request to specify the name of the basket.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="32%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/CreateBasket.cpp">Create Basket cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/CreateBasket.cs">Create Basket cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/CreateBasket.cls">Create Basket vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/CreateBasket.java">Create Basket java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/CreateBasket.py">Create Basket py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span><span class="p">)</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Service opened...&quot;</span><span class="p">)</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;CreateBasket&quot;</span><span class="p">)</span>

             <span class="c1"># define the basket name</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BASKET_NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;TestBasket&quot;</span><span class="p">)</span>

             <span class="c1"># add any number of orders</span>
             <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">4313227</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">4313228</span><span class="p">)</span>
             <span class="c1">#request.append(&quot;EMSX_SEQUENCE&quot;, 4313184)</span>

             <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">())</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Error: Service failed to open&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 CreateBasket.py
Bloomberg - EMSX API Example - CreateBasket
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: CreateBasket = {
    EMSX_BASKET_NAME = &quot;TestBasket&quot;
    EMSX_SEQUENCE[] = {
        4733961, 4733962
    }
}

Processing RESPONSE event
MESSAGE: CreateBasket = {
    EMSX_SEQUENCE[] = {
        4733961, 4733962
    }
    MESSAGE = &quot;Orders added to Basket&quot;
}

CORRELATION ID: 3
MESSAGE TYPE: CreateBasket
EMSX_SEQUENCE: 4733961  MESSAGE: Orders added to Basket
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="create-order-request">
<h2>Create Order Request<a class="headerlink" href="#create-order-request" title="Permalink to this headline">Â¶</a></h2>
<p>Creating an order requires the user to create a request from the service object of type <code class="docutils literal notranslate"><span class="pre">CreateOrder</span></code> and fill in the required fields before submitting the request.</p>
<p>If the handling instruction is for DMA access or any other non-standard handling instructions, EMSX API will not allow users to stage the order from the EMSX API unless the broker enables the broker code for EMSX API.  This is also true for custom Time in Force fields. Any non-standard TIF will also be restricted from staging unless the broker enables the broker code for EMSX API.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="32%" />
<col width="32%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/CreateOrder.cpp">Create Order cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/CreateOrder.cs">Create Order cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/CreateOrder.cls">Create Order vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/CreateOrder.java">Create Order java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/CreateOrder.py">Create Order py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;CreateOrder&quot;</span><span class="p">)</span>

             <span class="c1"># The fields below are mandatory</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_SIDE&quot;</span><span class="p">,</span> <span class="s2">&quot;BUY&quot;</span><span class="p">)</span>

             <span class="c1"># The fields below are optional</span>
             <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_BASKET_NAME&quot;, &quot;HedgingBasket&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_BROKER&quot;, &quot;BMTB&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CFD_FLAG&quot;, &quot;1&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CLEARING_ACCOUNT&quot;, &quot;ClrAccName&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CLEARING_FIRM&quot;, &quot;FirmName&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CUSTOM_NOTE1&quot;, &quot;Note1&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CUSTOM_NOTE2&quot;, &quot;Note2&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CUSTOM_NOTE3&quot;, &quot;Note3&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CUSTOM_NOTE4&quot;, &quot;Note4&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CUSTOM_NOTE5&quot;, &quot;Note5&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_EXCHANGE_DESTINATION&quot;, &quot;ExchDest&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_EXEC_INSTRUCTIONS&quot;, &quot;AnyInst&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_GET_WARNINGS&quot;, &quot;0&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_GTD_DATE&quot;, &quot;20170105&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_INVESTOR_ID&quot;, &quot;InvID&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_LIMIT_PRICE&quot;, 123.45)</span>
             <span class="c1">#request.set(&quot;EMSX_LOCATE_BROKER&quot;, &quot;BMTB&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_LOCATE_ID&quot;, &quot;SomeID&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_LOCATE_REQ&quot;, &quot;Y&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_NOTES&quot;, &quot;Some notes&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_ODD_LOT&quot;, &quot;0&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_ORDER_ORIGIN&quot;, &quot;&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_ORDER_REF_ID&quot;, &quot;UniqueID&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_P_A&quot;, &quot;P&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_RELEASE_TIME&quot;, 1259)</span>
             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1001)</span>
             <span class="c1">#request.set(&quot;EMSX_SETTLE_CURRENCY&quot;, &quot;USD&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_SETTLE_DATE&quot;, 20170106)</span>
             <span class="c1">#request.set(&quot;EMSX_SETTLE_TYPE&quot;, &quot;T+2&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_STOP_PRICE&quot;, 123.5)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

         <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

         <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

     <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
         <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 CreateOrder.py
Bloomberg - EMSX API Example - CreateOrder
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: CreateOrder = {
    EMSX_TICKER = &quot;MSFT US Equity&quot;
    EMSX_AMOUNT = 1100
    EMSX_ORDER_TYPE = MKT
    EMSX_TIF = DAY
    EMSX_HAND_INSTRUCTION = &quot;ANY&quot;
    EMSX_SIDE = BUY
}

Processing RESPONSE event
MESSAGE: CreateOrder = {
    EMSX_SEQUENCE = 4733955
    MESSAGE = &quot;Order created&quot;
}

CORRELATION ID: 3
MESSAGE TYPE: CreateOrder
EMSX_SEQUENCE: 4733955  MESSAGE: Order created
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="create-order-and-route-extended-request">
<h2>Create Order and Route Extended Request<a class="headerlink" href="#create-order-and-route-extended-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">CreateOrderAndRouteEx</span></code> request can be used for both strategy and non-strategy broker destinations.  Creating
an order and routing with strategy requires the user to create a request from the service object of type ``
CreateOrderAndRouteEx`` and fill in the required fields before submitting the request.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<blockquote>
<div>The user will first need to use various <code class="docutils literal notranslate"><span class="pre">Get___</span></code> requests to obtain all the necessary information to use the broker strategies the user is enabled for, returned in response. Subsequently, the user can then request <code class="docutils literal notranslate"><span class="pre">GetBrokerStrategiesWithAssetClass</span></code> to get all the broker strategies user is enabled for that particular broker code and asset class.</div></blockquote>
<p class="last">Lastly, <code class="docutils literal notranslate"><span class="pre">GetBrokerStrategyInfoWithAssetClass</span></code> will get all the fields for the provided broker strategy in the particular order in which they need to be submitted in <code class="docutils literal notranslate"><span class="pre">CreateOrderAndRouteEx</span></code> and <code class="docutils literal notranslate"><span class="pre">RouteEx</span></code> requests.</p>
</div>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="32%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/CreateOrderAndRouteEx.cpp">Create Order And Route Extended cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/CreateOrderAndRouteEx.cs">Create Order And Route Extended cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/CreateOrderAndRouteEx.cls">Create Order And Route Extended vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/CreateOrderAndRouteEx.java">Create Order And Route Extended java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/CreateOrderAndRouteEx.py">Create Order And Route Extended py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span>         <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
             <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

             <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

                 <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
                     <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

                     <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

                     <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;CreateOrderAndRouteEx&quot;</span><span class="p">)</span>

                     <span class="c1"># The fields below are mandatory</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_SIDE&quot;</span><span class="p">,</span> <span class="s2">&quot;BUY&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span> <span class="s2">&quot;BB&quot;</span><span class="p">)</span>

                     <span class="c1"># The fields below are optional</span>
                     <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
</pre></div>
</td></tr></table></div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 CreateOrderAndRouteEx.py
Bloomberg - EMSX API Example - CreateOrderAndRouteEx
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: CreateOrderAndRouteEx = {
    EMSX_TICKER = &quot;FB US Equity&quot;
    EMSX_AMOUNT = 1000
    EMSX_ORDER_TYPE = MKT
    EMSX_TIF = DAY
    EMSX_HAND_INSTRUCTION = &quot;ANY&quot;
    EMSX_SIDE = SELL
    EMSX_BROKER = &quot;BMTB&quot;
    EMSX_ACCOUNT = &quot;testAccount&quot;
    EMSX_NOTES = &quot;blah blah blah&quot;
    EMSX_ORDER_REF_ID = &quot;UniqueID&quot;
    EMSX_P_A = &quot;A&quot;
    EMSX_ROUTE_REF_ID = &quot;UniqueID2&quot;
    EMSX_STRATEGY_PARAMS = {
        EMSX_STRATEGY_NAME = &quot;VWAP&quot;
        EMSX_STRATEGY_FIELD_INDICATORS[] = {
            EMSX_STRATEGY_FIELD_INDICATORS = {
                EMSX_FIELD_INDICATOR = 0
            }
            EMSX_STRATEGY_FIELD_INDICATORS = {
                EMSX_FIELD_INDICATOR = 0
            }
            EMSX_STRATEGY_FIELD_INDICATORS = {
                EMSX_FIELD_INDICATOR = 1
            }
            EMSX_STRATEGY_FIELD_INDICATORS = {
                EMSX_FIELD_INDICATOR = 1
            }
            EMSX_STRATEGY_FIELD_INDICATORS = {
                EMSX_FIELD_INDICATOR = 1
            }
            EMSX_STRATEGY_FIELD_INDICATORS = {
                EMSX_FIELD_INDICATOR = 1
            }
        }
        EMSX_STRATEGY_FIELDS[] = {
            EMSX_STRATEGY_FIELDS = {
                EMSX_FIELD_DATA = &quot;09:30:00&quot;
            }
            EMSX_STRATEGY_FIELDS = {
                EMSX_FIELD_DATA = &quot;10:30:00&quot;
            }
            EMSX_STRATEGY_FIELDS = {
                EMSX_FIELD_DATA = &quot;&quot;
            }
            EMSX_STRATEGY_FIELDS = {
                EMSX_FIELD_DATA = &quot;&quot;
            }
            EMSX_STRATEGY_FIELDS = {
                EMSX_FIELD_DATA = &quot;&quot;
            }
            EMSX_STRATEGY_FIELDS = {
                EMSX_FIELD_DATA = &quot;&quot;
            }
        }
    }
}

Processing RESPONSE event
MESSAGE: CreateOrderAndRouteEx = {
    EMSX_SEQUENCE = 4733965
    EMSX_ROUTE_ID = 1
    MESSAGE = &quot;Order created and routed&quot;
}

CORRELATION ID: 3
MESSAGE TYPE: CreateOrderAndRouteEx
EMSX_SEQUENCE: 4733965  EMSX_ROUTE_ID: 1        MESSAGE: Order created and routed
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="create-order-and-route-manually-request">
<h2>Create Order And Route Manually Request<a class="headerlink" href="#create-order-and-route-manually-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">CreateOrderAndRouteManually</span></code> request is generally used for phone orders where the placement is external to EMSX API. This request creates an order and notifies EMSX&lt;GO&gt; that this order is routed to the execution venue.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="32%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/CreateOrderAndRouteManually.cpp">Create Order And Route Manually cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/CreateOrderAndRouteManually.cs">Create Order And Route Manually cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/CreateOrderAndRouteManually.cls">Create Order And Route Manually vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/CreateOrderAndRouteManually.java">Create Order And Route Manually java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/CreateOrderAndRouteManually.py">Create Order And Route Manually py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;CreateOrderAndRouteManually&quot;</span><span class="p">)</span>

             <span class="c1"># The fields below are mandatory</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_SIDE&quot;</span><span class="p">,</span> <span class="s2">&quot;BUY&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span> <span class="s2">&quot;BB&quot;</span><span class="p">)</span>

             <span class="c1"># The fields below are optional</span>
             <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CFD_FLAG&quot;, &quot;1&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CLEARING_ACCOUNT&quot;, &quot;ClrAccName&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CLEARING_FIRM&quot;, &quot;FirmName&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_EXCHANGE_DESTINATION&quot;, &quot;ExchDest&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_EXEC_INSTRUCTIONS&quot;, &quot;AnyInst&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_GET_WARNINGS&quot;, &quot;0&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_GTD_DATE&quot;, &quot;20170105&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_INVESTOR_ID&quot;, &quot;InvID&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_LIMIT_PRICE&quot;, 123.45)</span>
             <span class="c1">#request.set(&quot;EMSX_LOCATE_BROKER&quot;, &quot;BMTB&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_LOCATE_ID&quot;, &quot;SomeID&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_LOCATE_REQ&quot;, &quot;Y&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_NOTES&quot;, &quot;Some notes&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_ODD_LOT&quot;, &quot;0&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_ORDER_ORIGIN&quot;, &quot;&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_ORDER_REF_ID&quot;, &quot;UniqueID&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_P_A&quot;, &quot;P&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_RELEASE_TIME&quot;, 1259)</span>
             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1001)</span>
             <span class="c1">#request.set(&quot;EMSX_SETTLE_DATE&quot;, 20170106)</span>
             <span class="c1">#request.set(&quot;EMSX_STOP_PRICE&quot;, 123.5)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="delete-order-request">
<h2>Delete Order Request<a class="headerlink" href="#delete-order-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">DeleteOrder</span></code> request deletes an existing order in EMSX&lt;GO&gt;. This is not the same action as canceling the parent order. In fact, EMSX API does not expose Cancel Order status as in EMSX&lt;GO&gt;.</p>
<p>The primary reason behind this is because the cancel rrder in EMSX&lt;GO&gt; really just puts an order in an inoperable state and doesnât really serve any meaningful function.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/DeleteOrder.cpp">Delete Order cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/DeleteOrder.cs">Delete Order cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/DeleteOrder.cls">Delete Order vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/DeleteOrder.java">Delete Order java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/DeleteOrder.py">Delete Order py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;DeleteOrder&quot;</span><span class="p">)</span>

             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

             <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">appendValue</span><span class="p">(</span><span class="mi">3744363</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">appendValue</span><span class="p">(</span><span class="mi">3744364</span><span class="p">)</span>


             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 DeleteOrder.py
Bloomberg - EMSX API Example - DeleteOrder
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: DeleteOrder = {
    EMSX_SEQUENCE[] = {
        4733961
    }
}

Processing RESPONSE event
MESSAGE: DeleteOrder = {
    STATUS = 0
    MESSAGE = &quot;Order deleted&quot;
}

CORRELATION ID: 3
MESSAGE TYPE: DeleteOrder
STATUS: 0       MESSAGE: Order deleted
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="get-all-field-metadata-request">
<h2>Get All Field Metadata Request<a class="headerlink" href="#get-all-field-metadata-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">GetAllFiedlMetaData</span></code> request provides all field metadata in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="32%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GetAllFieldMetaData.cpp">Get All Field Meta Data cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetAllFieldMetaData.cs">Get All Field Meta Data cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GetAllFieldMetaData.cls">Get All Field Meta Data vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GetAllFieldMetaData.java">Get All Field Meta Data java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetAllFieldMetaData.py">Get All Field Meta Data py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetAllFieldMetaData&quot;</span><span class="p">)</span>

            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
<p>Process response messages:-</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processResponseEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing RESPONSE event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">print</span> <span class="s2">&quot;MESSAGE: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">msg</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>
        <span class="k">print</span> <span class="s2">&quot;CORRELATION ID: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">msg</span><span class="o">.</span><span class="n">correlationIds</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>


        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">correlationIds</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
            <span class="k">print</span> <span class="s2">&quot;MESSAGE TYPE: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">ERROR_INFO</span><span class="p">:</span>
                <span class="n">errorCode</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">getElementAsInteger</span><span class="p">(</span><span class="s2">&quot;ERROR_CODE&quot;</span><span class="p">)</span>
                <span class="n">errorMessage</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">getElementAsString</span><span class="p">(</span><span class="s2">&quot;ERROR_MESSAGE&quot;</span><span class="p">)</span>
                <span class="k">print</span> <span class="s2">&quot;ERROR CODE: </span><span class="si">%d</span><span class="se">\t</span><span class="s2">ERROR MESSAGE: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">errorCode</span><span class="p">,</span><span class="n">errorMessage</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">GET_ALL_FIELD_METADATA</span><span class="p">:</span>

                <span class="n">md</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;MetaData&quot;</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">md</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>

                    <span class="n">emsx_field_name</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getElementAsString</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_NAME&quot;</span><span class="p">)</span>
                    <span class="n">emsx_disp_name</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getElementAsString</span><span class="p">(</span><span class="s2">&quot;EMSX_DISP_NAME&quot;</span><span class="p">)</span>
                    <span class="n">emsx_type</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getElementAsString</span><span class="p">(</span><span class="s2">&quot;EMSX_TYPE&quot;</span><span class="p">)</span>
                    <span class="n">emsx_level</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getElementAsInteger</span><span class="p">(</span><span class="s2">&quot;EMSX_LEVEL&quot;</span><span class="p">)</span>
                    <span class="n">emsx_len</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getElementAsInteger</span><span class="p">(</span><span class="s2">&quot;EMSX_LEN&quot;</span><span class="p">)</span>

                    <span class="k">print</span> <span class="s2">&quot;MetaData: </span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">,</span><span class="si">%d</span><span class="s2">,</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">emsx_field_name</span><span class="p">,</span> <span class="n">emsx_disp_name</span><span class="p">,</span> <span class="n">emsx_type</span><span class="p">,</span> <span class="n">emsx_level</span><span class="p">,</span> <span class="n">emsx_len</span><span class="p">)</span>

            <span class="k">global</span> <span class="n">bEnd</span>
            <span class="n">bEnd</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">processMiscEvents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>

    <span class="k">print</span> <span class="s2">&quot;Processing &quot;</span> <span class="o">+</span> <span class="n">event</span><span class="o">.</span><span class="n">eventType</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">print</span> <span class="s2">&quot;MESSAGE: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">tostring</span><span class="p">())</span>
</pre></div>
</div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 GetAllFieldMetaData.py
Bloomberg - EMSX API Example - GetAllFieldMetaData
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: GetAllFieldMetaData = {
}

Processing RESPONSE event
MESSAGE: GetAllFieldMetaData = {
    MetaData[] = {
        MetaData = {
            EMSX_FIELD_NAME = &quot;MSG_TYPE&quot;
            EMSX_DISP_NAME = &quot;Msg Type&quot;
            EMSX_TYPE = String
            EMSX_LEVEL = 0
            EMSX_LEN = 1
        }
        MetaData = {
            EMSX_FIELD_NAME = &quot;MSG_SUB_TYPE&quot;
            EMSX_DISP_NAME = &quot;Msg Sub Type&quot;
            EMSX_TYPE = String
            EMSX_LEVEL = 0
            EMSX_LEN = 1
        }
        MetaData = {
            EMSX_FIELD_NAME = &quot;EVENT_STATUS&quot;
            EMSX_DISP_NAME = &quot;Msg Status&quot;
            EMSX_TYPE = Int32
            EMSX_LEVEL = 0
            EMSX_LEN = 10
        }
        MetaData = {
            EMSX_FIELD_NAME = &quot;API_SEQ_NUM&quot;
            EMSX_DISP_NAME = &quot;Api Sequence&quot;
            EMSX_TYPE = Int64
            EMSX_LEVEL = 0
            EMSX_LEN = 20
        }
        MetaData = {
            EMSX_FIELD_NAME = &quot;EMSX_SEQUENCE&quot;
            EMSX_DISP_NAME = &quot;Sequence #&quot;
            EMSX_TYPE = Int32
            EMSX_LEVEL = 27
            EMSX_LEN = 10
        }
        MetaData = {
            EMSX_FIELD_NAME = &quot;EMSX_ROUTE_ID&quot;
            EMSX_DISP_NAME = &quot;Tran No&quot;
            EMSX_TYPE = Int32
            EMSX_LEVEL = 11
            EMSX_LEN = 10
        }
        MetaData = {
            EMSX_FIELD_NAME = &quot;EMSX_FILL_ID&quot;
            EMSX_DISP_NAME = &quot;Fill Id&quot;
            EMSX_TYPE = Int32
            EMSX_LEVEL = 2
            EMSX_LEN = 10
        }
        MetaData = {
            EMSX_FIELD_NAME = &quot;EMSX_SIDE&quot;
            EMSX_DISP_NAME = &quot;B/S&quot;
            EMSX_TYPE = String
            EMSX_LEVEL = 17
            EMSX_LEN = 4
       ...

       ...
        MetaData = {
            EMSX_FIELD_NAME = &quot;EMSX_LEG_FILL_TICKER&quot;
            EMSX_DISP_NAME = &quot;Leg Fill Ticker&quot;
            EMSX_TYPE = String
            EMSX_LEVEL = 2
            EMSX_LEN = 32
        }
    }
}

CORRELATION ID: 3
MESSAGE TYPE: GetAllFieldMetaData
MetaData: MSG_TYPE,Msg Type,String,0,1
MetaData: MSG_SUB_TYPE,Msg Sub Type,String,0,1
MetaData: EVENT_STATUS,Msg Status,Int32,0,10
MetaData: API_SEQ_NUM,Api Sequence,Int64,0,20
MetaData: EMSX_SEQUENCE,Sequence #,Int32,27,10
...
...
MetaData: EMSX_ROUTE_AS_OF_TIME_MICROSEC,Route As of Time,Time,2,20
MetaData: EMSX_AS_OF_DATE,Order/Route As of Date,Date,24,8
MetaData: EMSX_AS_OF_TIME_MICROSEC,Order/Route As of Time,Time,24,20
MetaData: EMSX_LEG_FILL_SIDE,Leg Fill Side,String,2,3
MetaData: EMSX_LEG_FILL_DATE_ADDED,Leg Fill Date Added,Date,2,8
MetaData: EMSX_LEG_FILL_TIME_ADDED,Leg fill Time Added,Time,2,20
MetaData: EMSX_LEG_FILL_SHARES,Leg Fill Shares,Double,2,15
MetaData: EMSX_LEG_FILL_PRICE,Leg Fill Price,Double,2,15
MetaData: EMSX_LEG_FILL_SEQ_NO,Leg Fill Seq No,Int32,2,10
MetaData: EMSX_LEG_FILL_TICKER,Leg Fill Ticker,String,2,32
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="get-broker-strategies-with-asset-class-request">
<h2>Get Broker Strategies with Asset Class Request<a class="headerlink" href="#get-broker-strategies-with-asset-class-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">GetBrokerStrategiesWithAssetClass</span></code> request provides all broker strategy fields with asset class data in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GetBrokerStrategiesWithAssetClass.cpp">Get Broker Strategies With Asset Class cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetBrokerStrategiesWithAssetClass.cs">Get Broker Strategies With Asset Class cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GetBrokerStrategiesWithAssetClass.cls">Get Broker Strategies With Asset Class vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GetBrokerStrategiesWithAssetClass.java">Get Broker Strategies With Asset Class java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetBrokerStrategiesWithAssetClass.py">Get Broker Strategies With Asset Class py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetBrokerStrategiesWithAssetClass&quot;</span><span class="p">)</span>

             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ASSET_CLASS&quot;</span><span class="p">,</span><span class="s2">&quot;EQTY&quot;</span><span class="p">)</span>  <span class="c1"># one of EQTY, OPT, FUT or MULTILEG_OPT</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span><span class="s2">&quot;BMTB&quot;</span><span class="p">)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 GetBrokerStrategiesWithAssetClass.py
Bloomberg - EMSX API Example - GetBrokerStrategiesWithAssetClass
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: GetBrokerStrategiesWithAssetClass = {
    EMSX_ASSET_CLASS = EQTY
    EMSX_BROKER = &quot;PAIR&quot;
}

Processing RESPONSE event
MESSAGE: GetBrokerStrategiesWithAssetClass = {
    EMSX_STRATEGIES[] = {
        &quot;&quot;
    }
}

CORRELATION ID: 3
MESSAGE TYPE: GetBrokerStrategiesWithAssetClass
EMSX_STRATEGY:
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="get-broker-strategy-info-with-asset-class-request">
<h2>Get Broker Strategy Info with Asset Class Request<a class="headerlink" href="#get-broker-strategy-info-with-asset-class-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">GetBrokerStrategyInfoWithAssetClass</span></code> request provides all broker strategy information fields with asset classdata in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GetBrokerStrategyInfoWithAssetClass.cpp">Get Broker Strategy Info With Asset Class cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetBrokerStrategyInfoWithAssetClass.cs">Get Broker Strategy Info With Asset Class cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GetBrokerStrategyInfoWithAssetClass.cls">Get Broker Strategy Info With Asset Class vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GetBrokerStrategyInfoWithAssetClass.java">Get Broker Strategy Info With Asset Class java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetBrokerStrategyInfoWithAssetClass.py">Get Broker Strategy Info With Asset Class py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetBrokerStrategyInfoWithAssetClass&quot;</span><span class="p">)</span>

             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_REQUEST_SEQ&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ASSET_CLASS&quot;</span><span class="p">,</span><span class="s2">&quot;EQTY&quot;</span><span class="p">)</span>  <span class="c1"># one of EQTY, OPT, FUT or MULTILEG_OPT</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span><span class="s2">&quot;BMTB&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_STRATEGY&quot;</span><span class="p">,</span><span class="s2">&quot;VWAP&quot;</span><span class="p">)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 GetBrokerStrategyInfoWithAssetClass.py
Bloomberg - EMSX API Example - GetBrokerStrategyInfoWithAssetClass
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: GetBrokerStrategyInfoWithAssetClass = {
    EMSX_REQUEST_SEQ = 1
    EMSX_ASSET_CLASS = EQTY
    EMSX_BROKER = &quot;BMTB&quot;
    EMSX_STRATEGY = &quot;VWAP&quot;
}

Processing RESPONSE event
MESSAGE: GetBrokerStrategyInfoWithAssetClass = {
    EMSX_STRATEGY_INFO[] = {
        EMSX_STRATEGY_INFO = {
            FieldName = &quot;Start Time&quot;
            Disable = 0
            StringValue = &quot;&quot;
        }
        EMSX_STRATEGY_INFO = {
            FieldName = &quot;End Time&quot;
            Disable = 0
            StringValue = &quot;&quot;
        }
        EMSX_STRATEGY_INFO = {
            FieldName = &quot;Max % Volume&quot;
            Disable = 0
            StringValue = &quot;&quot;
        }
        EMSX_STRATEGY_INFO = {
            FieldName = &quot;Discretion&quot;
            Disable = 0
            StringValue = &quot;&quot;
        }
        EMSX_STRATEGY_INFO = {
            FieldName = &quot;Display Qty&quot;
            Disable = 0
            StringValue = &quot;&quot;
        }
        EMSX_STRATEGY_INFO = {
            FieldName = &quot;FltLmtType&quot;
            Disable = 0
            StringValue = &quot;&quot;
        }
    }
}

CORRELATION ID: 3
MESSAGE TYPE: GetBrokerStrategyInfoWithAssetClass
EMSX_STRATEGY_INFO: Start Time, 0,
EMSX_STRATEGY_INFO: End Time, 0,
EMSX_STRATEGY_INFO: Max % Volume, 0,
EMSX_STRATEGY_INFO: Discretion, 0,
EMSX_STRATEGY_INFO: Display Qty, 0,
EMSX_STRATEGY_INFO: FltLmtType, 0,
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="get-brokers-with-asset-class-request">
<h2>Get Brokers with Asset Class Request<a class="headerlink" href="#get-brokers-with-asset-class-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">GetBrokersWithAssetClass</span></code> request provides all broker information with asset class data in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="34%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GetBrokersWithAssetClass.cpp">Get Brokers With Asset Class cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetBrokersWithAssetClass.cs">Get Brokers With Asset Class cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GetBrokersWithAssetClass.cls">Get Brokers With Asset Class vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GetBrokersWithAssetClass.java">Get Brokers With Asset Class java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetBrokersWithAssetClass.py">Get Brokers With Asset Class py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetBrokersWithAssetClass&quot;</span><span class="p">)</span>

             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ASSET_CLASS&quot;</span><span class="p">,</span><span class="s2">&quot;EQTY&quot;</span><span class="p">)</span>  <span class="c1"># one of EQTY, OPT, FUT or MULTILEG_OPT</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
                     <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 GetBrokersWithAssetClass.py
Bloomberg - EMSX API Example - GetBrokersWithAssetClass
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: GetBrokersWithAssetClass = {
    EMSX_ASSET_CLASS = EQTY
}

Processing RESPONSE event
MESSAGE: GetBrokersWithAssetClass = {
    EMSX_BROKERS[] = {
        &quot;API&quot;, &quot;BB&quot;, &quot;BEXE&quot;, &quot;BMTB&quot;, &quot;EEUE&quot;, &quot;EFIX&quot;, &quot;RFQ&quot;, &quot;TKOR&quot;
    }
}

CORRELATION ID: 3
MESSAGE TYPE: GetBrokersWithAssetClass
EMSX_BROKER: API
EMSX_BROKER: BB
EMSX_BROKER: BEXE
EMSX_BROKER: BMTB
EMSX_BROKER: EEUE
EMSX_BROKER: EFIX
EMSX_BROKER: RFQ
EMSX_BROKER: TKOR
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="get-field-metadata-request">
<h2>Get Field Metadata Request<a class="headerlink" href="#get-field-metadata-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">GetFieldMetaData</span></code> request provides all field metadata in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GetFieldMetaData.cpp">Get Field Meta Data cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetFieldMetaData.cs">Get Field Meta Data cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GetFieldMetaData.cls">Get Field Meta Data vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GetFieldMetaData.java">Get Field Meta Data java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetFieldMetaData.py">Get Field Meta Data py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetFieldMetaData&quot;</span><span class="p">)</span>

             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

             <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_NAMES&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">appendValue</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_NAMES&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">appendValue</span><span class="p">(</span><span class="s2">&quot;EMSX_P_A&quot;</span><span class="p">)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="get-teams-request">
<h2>Get Teams Request<a class="headerlink" href="#get-teams-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">GetTeams</span></code> request provides all the team details in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="31%" />
<col width="37%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GetTeams.cpp">Get Teams cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetTeams.cs">Get Teams cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GetTeams.cls">Get Teams vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GetTeams.java">Get Teams java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetTeams.py">Get Teams py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetTeams&quot;</span><span class="p">)</span>

             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="get-trade-desks-request">
<h2>Get Trade Desks Request<a class="headerlink" href="#get-trade-desks-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">GetTradeDesks</span></code> is AIM specific request and provides all the trade desk details in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="45%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetTradeDesks.cs">Get Trade Desks cs</a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetTradeDesks.py">Get Trade Desks py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetTradeDesks&quot;</span><span class="p">)</span>

             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="get-traders-request">
<h2>Get Traders Request<a class="headerlink" href="#get-traders-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">GetTraders</span></code> is AIM specific request and provides all the traders details in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetTraders.cs">Get Traders cs</a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetTraders.py">Get Traders py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetTraders&quot;</span><span class="p">)</span>

             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="group-route-extended-request">
<h2>Group Route Extended Request<a class="headerlink" href="#group-route-extended-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">GroupRouteEx</span></code> request submits an entire list as a single route to a basket/program broker strategy destination.</p>
<p>This request should only be used if the intention is to submit an entire list or basket of securities to a single broker strategy destination. This should not be confused with maintaining a list or a basket from a portfolio perspective.</p>
<p>Currently, this is a three-step process in EMSX API.</p>
<p>The first step is for the user will need to use <code class="docutils literal notranslate"><span class="pre">CreateOrder</span></code> request to create the order. Once the orders are created, the user will use <code class="docutils literal notranslate"><span class="pre">CreateBasket</span></code> request to create the basket or list of orders and use <code class="docutils literal notranslate"><span class="pre">EMSX_BASKET_NAME</span></code> element to specify the basket name.</p>
<p>The next step is to submit the list using <code class="docutils literal notranslate"><span class="pre">GroupRouteEx</span></code> request and include the <code class="docutils literal notranslate"><span class="pre">EMSX_SEQUENCE</span></code> number inside the array.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Please remember that the application does need to wait for confirmation of the basket creation to trigger the the <code class="docutils literal notranslate"><span class="pre">GroupRouteEx</span></code> request. The <code class="docutils literal notranslate"><span class="pre">GroupRouteEx</span></code> request is NOT independent of the basket creation for routing (placements).</p>
</div>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GroupRouteEx.cpp">Group Route Extended cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GroupRouteEx.cs">Group Route Extended cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GroupRoute.cls">Group Route Extended vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GroupRouteEx.java">Group Route Extended java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GroupRouteEx.py">Group Route Extended py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131</pre></div></td><td class="code"><div class="highlight"><pre><span></span>         <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
             <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

             <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

                 <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
                     <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

                     <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

                     <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GroupRouteEx&quot;</span><span class="p">)</span>

                     <span class="c1"># Multiple order numbers can be added</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3745211</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3745212</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3745213</span><span class="p">)</span>

                     <span class="c1"># The fields below are mandatory</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT_PERCENT&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>  <span class="c1"># Note the amount here is %age of order amount</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span> <span class="s2">&quot;BMTB&quot;</span><span class="p">);</span>

                     <span class="c1"># For GroupRoute, the below values need to be added, but are taken</span>
                     <span class="c1"># from the original order when the route is created.</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>

                     <span class="c1"># The fields below are optional</span>
                     <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_BOOKNAME&quot;,&quot;BookName&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_CFD_FLAG&quot;, &quot;1&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_CLEARING_ACCOUNT&quot;, &quot;ClrAccName&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_CLEARING_FIRM&quot;, &quot;FirmName&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_EXEC_INSTRUCTIONS&quot;, &quot;AnyInst&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_GET_WARNINGS&quot;, &quot;0&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_GTD_DATE&quot;, &quot;20170105&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_LIMIT_PRICE&quot;, 123.45)</span>
                     <span class="c1">#request.set(&quot;EMSX_LOCATE_BROKER&quot;, &quot;BMTB&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_LOCATE_ID&quot;, &quot;SomeID&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_LOCATE_REQ&quot;, &quot;Y&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_NOTES&quot;, &quot;Some notes&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_ODD_LOT&quot;, &quot;0&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_P_A&quot;, &quot;P&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_RELEASE_TIME&quot;, 1259)</span>
                     <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1001)</span>
                     <span class="c1">#request.set(&quot;EMSX_STOP_PRICE&quot;, 123.5)</span>
                     <span class="c1">#request.set(&quot;EMSX_TRADER_UUID&quot;, 1234567)</span>

                     <span class="c1"># Set the Request Type if this is for multi-leg orders</span>
                     <span class="c1"># only valid for options</span>
                     <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">                     requestType = request.getElement(&quot;EMSX_REQUEST_TYPE&quot;)</span>
<span class="sd">                     requestType.setChoice(&quot;Multileg&quot;)</span>
<span class="sd">                     multileg = requestType.getElement(&quot;Multileg&quot;)</span>
<span class="sd">                     multileg.setElement(&quot;EMSX_AMOUNT&quot;,10)</span>
<span class="sd">                     multileg.getElement(&quot;EMSX_ML_RATIO&quot;).appendValue(2)</span>
<span class="sd">                     multileg.getElement(&quot;EMSX_ML_RATIO&quot;).appendValue(3)</span>
<span class="sd">                     &#39;&#39;&#39;</span>

                     <span class="c1"># Add the Route Ref ID values</span>
                     <span class="n">routeRefIDPairs</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_ROUTE_REF_ID_PAIRS&quot;</span><span class="p">)</span>
                     <span class="n">route1</span> <span class="o">=</span> <span class="n">routeRefIDPairs</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span>
                     <span class="n">route1</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_ROUTE_REF_ID&quot;</span><span class="p">,</span><span class="s2">&quot;MyRouteRef1&quot;</span><span class="p">)</span>
                     <span class="n">route1</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span><span class="mi">3745211</span><span class="p">)</span>

                     <span class="n">route2</span> <span class="o">=</span> <span class="n">routeRefIDPairs</span><span class="o">.</span><span class="n">appendElement</span><span class="p">();</span>
                     <span class="n">route2</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_ROUTE_REF_ID&quot;</span><span class="p">,</span><span class="s2">&quot;MyRouteRef2&quot;</span><span class="p">)</span>
                     <span class="n">route2</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span><span class="mi">3745212</span><span class="p">)</span>

                     <span class="n">route3</span> <span class="o">=</span> <span class="n">routeRefIDPairs</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span>
                     <span class="n">route3</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_ROUTE_REF_ID&quot;</span><span class="p">,</span><span class="s2">&quot;MyRouteRef3&quot;</span><span class="p">)</span>
                     <span class="n">route3</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span><span class="mi">3745213</span><span class="p">)</span>

                     <span class="c1"># Below we establish the strategy details. Strategy details</span>
                     <span class="c1"># are common across all orders in a GroupRoute operation.</span>

                     <span class="n">strategy</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_STRATEGY_PARAMS&quot;</span><span class="p">)</span>
                     <span class="n">strategy</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_STRATEGY_NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;VWAP&quot;</span><span class="p">)</span>

                     <span class="n">indicator</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_STRATEGY_FIELD_INDICATORS&quot;</span><span class="p">)</span>
                     <span class="n">data</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_STRATEGY_FIELDS&quot;</span><span class="p">)</span>

                     <span class="c1"># Strategy parameters must be appended in the correct order. See the output</span>
                     <span class="c1"># of GetBrokerStrategyInfo request for the order. The indicator value is 0 for</span>
                     <span class="c1"># a field that carries a value, and 1 where the field should be ignored</span>

                     <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;09:30:00&quot;</span><span class="p">)</span>  <span class="c1"># StartTime</span>
                     <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

                     <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;10:30:00&quot;</span><span class="p">)</span>  <span class="c1"># EndTime</span>
                     <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

                     <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># Max%Volume</span>
                     <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                     <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># %AMSession</span>
                     <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                     <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># OPG</span>
                     <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                     <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># MOC</span>
                     <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                     <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># CompletePX</span>
                     <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                     <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># TriggerPX</span>
                     <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                     <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># DarkComplete</span>
                     <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                     <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># DarkCompPX</span>
                     <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                     <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># RefIndex</span>
                     <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                     <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># Discretion</span>
                     <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                     <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

                     <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

                     <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

                 <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
                     <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 GroupRouteEx.py
Bloomberg - EMSX API Example - GroupRouteEx
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: GroupRouteEx = {
    EMSX_SEQUENCE[] = {
        4747927, 4747928
    }
    EMSX_AMOUNT_PERCENT = 20
    EMSX_BROKER = &quot;BB&quot;
    EMSX_HAND_INSTRUCTION = &quot;ANY&quot;
    EMSX_ORDER_TYPE = MKT
    EMSX_TICKER = &quot;GE US Equity&quot;
    EMSX_TIF = DAY
    EMSX_ROUTE_REF_ID_PAIRS[] = {
        EMSX_ROUTE_REF_ID_PAIRS = {
            EMSX_ROUTE_REF_ID = &quot;MyRouteRef1&quot;
            EMSX_SEQUENCE = 4747927
        }
        EMSX_ROUTE_REF_ID_PAIRS = {
            EMSX_ROUTE_REF_ID = &quot;MyRouteRef2&quot;
            EMSX_SEQUENCE = 4747928
        }
    }
}

Processing RESPONSE event
MESSAGE: GroupRouteEx = {
    EMSX_SUCCESS_ROUTES[] = {
        EMSX_SUCCESS_ROUTES = {
            EMSX_SEQUENCE = 4747927
            EMSX_ROUTE_ID = 1
        }
        EMSX_SUCCESS_ROUTES = {
            EMSX_SEQUENCE = 4747928
            EMSX_ROUTE_ID = 1
        }
    }
    EMSX_FAILED_ROUTES[] = {
    }
    MESSAGE = &quot;2 of 2 Order(s) Routed&quot;
    EMSX_ML_ID = &quot;0:0&quot;
}

CORRELATION ID: 3
MESSAGE TYPE: GroupRouteEx
SUCCESS: 4747927,1
SUCCESS: 4747928,1
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="group-route-extended-request-multi-leg-options">
<h2>Group Route Extended Request - Multi-Leg Options<a class="headerlink" href="#group-route-extended-request-multi-leg-options" title="Permalink to this headline">Â¶</a></h2>
<p>The multi-leg options can be traded using <code class="docutils literal notranslate"><span class="pre">GroupRouteEx</span></code> request. The first step is to create the
options and if need be equities leg using <code class="docutils literal notranslate"><span class="pre">CreateOrder</span></code> request. Once this is completed, create a
request object for <code class="docutils literal notranslate"><span class="pre">GroupRouteEx</span></code> and submit it to the session with all the fields necessary for the
multi-leg options routing.</p>
<p>The overall workflow for multi-leg options is similar to how you create and submit a basket or a list in
EMSX.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">CreateOrder</span></code> request will essentially stage the multi-leg options orders into EMSX.
(e.g. B/O on AAPL US 11/20/15 C121 Equity and B/O on AAPL US 11/20/15 P119 Equity. )</p>
<p>The multi-leg request is an array and similar to submitting a basket order, it is important to make sure
the <code class="docutils literal notranslate"><span class="pre">EMSX_SEQUENCE</span></code> matches in the <code class="docutils literal notranslate"><span class="pre">GroupRouteEx</span></code> with the orders created using <code class="docutils literal notranslate"><span class="pre">CreateOrder</span></code>
request. For the subscription services, there will initially be eight elements to subscribe at the Route
level subscription.  They are <code class="docutils literal notranslate"><span class="pre">EMSX_ML_ID</span></code>, <code class="docutils literal notranslate"><span class="pre">EMSX_ML_LEG_QUANTITY</span></code>, <code class="docutils literal notranslate"><span class="pre">EMSX_ML_NUM_LEGS</span></code>, <code class="docutils literal notranslate"><span class="pre">EMSX_ML_PERCENT_FILLED</span></code>, <code class="docutils literal notranslate"><span class="pre">EMSX_ML_RATIO</span></code>, <code class="docutils literal notranslate"><span class="pre">EMSX_ML_REMAIN_BALANCE</span></code>, <code class="docutils literal notranslate"><span class="pre">EMSX_ML_STRATEGY</span></code>, and <code class="docutils literal notranslate"><span class="pre">EMSX_ML_TOTAL_QUANTITY</span></code>.</p>
<p>Please set the <code class="docutils literal notranslate"><span class="pre">EMSX_REQEST_TYPE</span></code> as <code class="docutils literal notranslate"><span class="pre">Multileg</span></code> to submit the multi-leg options using GroupRouteEx request.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The Debit and Credit is indicated by the  net price. Credit is indicated by using the negative sign
in the net price where the Debit is indicated by the positive net price.</p>
<p>The net price can be specified using the <code class="docutils literal notranslate"><span class="pre">EMSX_LIMIT_PRICE</span></code> element for the multi-leg options orders.</p>
<p><code class="docutils literal notranslate"><span class="pre">Debit</span></code> = positive for the net price</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">Credit</span></code> = negative for the net price</p>
</div>
</div>
<div class="section" id="group-route-extended-request-route-as-spread">
<h2>Group Route Extended Request - Route As Spread<a class="headerlink" href="#group-route-extended-request-route-as-spread" title="Permalink to this headline">Â¶</a></h2>
<p>As of 15th of May, 2017 there also will be an ability to use GroupRouteEx to route two non-ticker as spread ticker in
EMSX.</p>
<p>The underlying concept remains the same and the only difference is to use <code class="docutils literal notranslate"><span class="pre">EMSX_REQUEST_TYPE</span></code> as a <code class="docutils literal notranslate"><span class="pre">spread</span></code> instead
of <code class="docutils literal notranslate"><span class="pre">Multileg</span></code> and for <code class="docutils literal notranslate"><span class="pre">EMSX_TICKER</span></code> use one of the two tickers that makes the spread ticker. The <code class="docutils literal notranslate"><span class="pre">EMSX_SEQUENCE</span></code>
inside the array to submit the list remains the same for using <code class="docutils literal notranslate"><span class="pre">GroupRouteEx</span></code> to route as a spread.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">EMSX_AMOUNT_PERCENT</span></code> element for this request is used strictly for the amount in shares.</p>
<p class="last">e.g. <code class="docutils literal notranslate"><span class="pre">EMSX_AMOUNT_PERCENT</span></code>, 100 means itâll send 100 shares from each ticker.</p>
</div>
<p>Full code sample:-</p>
<p><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/RouteAsSpread.py">Route As Spread py</a></p>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">routeSpread</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>

     <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GroupRouteEx&quot;</span><span class="p">)</span>

     <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buySeqNo</span><span class="p">)</span>
     <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sellSeqNo</span><span class="p">)</span>
     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT_PERCENT&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span> <span class="s2">&quot;ETI&quot;</span><span class="p">);</span>
     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>
     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span><span class="s2">&quot;CLN7 Comdty&quot;</span><span class="p">)</span>
     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_RELEASE_TIME&quot;</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
     <span class="n">requestType</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_REQUEST_TYPE&quot;</span><span class="p">)</span>
     <span class="n">requestType</span><span class="o">.</span><span class="n">setChoice</span><span class="p">(</span><span class="s2">&quot;Spread&quot;</span><span class="p">)</span>

     <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

     <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

     <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="manual-fill-request">
<h2>Manual Fill Request<a class="headerlink" href="#manual-fill-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ManualFill</span></code> request can be used on the sell-side EMSX&lt;GO&gt; settings to create fills and notifies
EMSX&lt;GO&gt;.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="33%" />
<col width="32%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/ManualFill.cpp">Manual Fill cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/ManualFill.cs">Manual Fill cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/ManualFill.cls">Manual Fill vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/ManualFill.java">Manual Fill java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/ManualFill.py">Manual Fill py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;ManualFill&quot;</span><span class="p">);</span>

             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TRADER_UUID&quot;</span><span class="p">,</span> <span class="mi">12109783</span><span class="p">)</span>

             <span class="n">routeToFill</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;ROUTE_TO_FILL&quot;</span><span class="p">)</span>

             <span class="n">routeToFill</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">1234567</span><span class="p">)</span>
             <span class="n">routeToFill</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_ROUTE_ID&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

             <span class="n">fills</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;FILLS&quot;</span><span class="p">)</span>

             <span class="n">fills</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FILL_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
             <span class="n">fills</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FILL_PRICE&quot;</span><span class="p">,</span> <span class="mf">123.4</span><span class="p">)</span>
             <span class="n">fills</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_LAST_MARKET&quot;</span><span class="p">,</span> <span class="s2">&quot;XLON&quot;</span><span class="p">)</span>

             <span class="n">fills</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_INDIA_EXCHANGE&quot;</span><span class="p">,</span><span class="s2">&quot;BGL&quot;</span><span class="p">)</span>

             <span class="n">fillDateTime</span> <span class="o">=</span> <span class="n">fills</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FILL_DATE_TIME&quot;</span><span class="p">)</span>

             <span class="n">fillDateTime</span><span class="o">.</span><span class="n">setChoice</span><span class="p">(</span><span class="s2">&quot;Legacy&quot;</span><span class="p">);</span>

             <span class="n">fillDateTime</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FILL_DATE&quot;</span><span class="p">,</span><span class="mi">20172203</span><span class="p">)</span>
             <span class="n">fillDateTime</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FILL_TIME&quot;</span><span class="p">,</span><span class="mi">17054</span><span class="p">)</span>
             <span class="n">fillDateTime</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FILL_TIME_FORMAT&quot;</span><span class="p">,</span><span class="s2">&quot;SecondsFromMidnight&quot;</span><span class="p">)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="modify-order-extended-request">
<h2>Modify Order Extended Request<a class="headerlink" href="#modify-order-extended-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ModifyOrderEx</span></code> request modifies an existing or previously created order in EMSX&lt;GO&gt; or using EMSX API.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Please note, when modifying an order or route, the limit price can be positive or negative. (e.g. Futures spreads).
There are two special cases for setting the limit price to 0. In the <code class="docutils literal notranslate"><span class="pre">EMSX_LIMIT_PRICE</span></code> a value of 0 means to ignore the value.
A value of <code class="docutils literal notranslate"><span class="pre">EMSX_LIMIT_PRICE</span></code> = -99999 means to reset the <code class="docutils literal notranslate"><span class="pre">EMSX_LIMIT_PRICE</span></code> to 0.</p>
</div>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/ModifyOrderEx.cpp">Modify Order Extended cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/ModifyOrderEx.cs">Modify Order Extended cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/ModifyOrderEx.cls">Modify Order Extended vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/ModifyOrderEx.java">Modify Order Extended java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/ModifyOrderEx.py">Modify Order Extended py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre></div></td><td class="code"><div class="highlight"><pre><span></span>      <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;ModifyOrderEx&quot;</span><span class="p">)</span>

             <span class="c1"># The fields below are mandatory</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3834157</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">1300</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>

             <span class="c1"># The fields below are optional</span>
             <span class="c1">#request.set(&quot;EMSX_HAND_INSTRUCTION&quot;, &quot;ANY&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CFD_FLAG&quot;, &quot;1&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_EXEC_INSTRUCTIONS&quot;, &quot;AnyInst&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_GET_WARNINGS&quot;, &quot;0&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_GTD_DATE&quot;, &quot;20170105&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_INVESTOR_ID&quot;, &quot;InvID&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_LIMIT_PRICE&quot;, 123.45)</span>
             <span class="c1">#request.set(&quot;EMSX_NOTES&quot;, &quot;Some notes&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1001)</span>
             <span class="c1">#request.set(&quot;EMSX_STOP_PRICE&quot;, 123.5)</span>

             <span class="c1"># Note: When changing order type to a LMT order, you will need to provide the EMSX_LIMIT_PRICE value.</span>
             <span class="c1">#       When changing order type away from LMT order, you will need to reset the EMSX_LIMIT_PRICE value</span>
             <span class="c1">#       by setting the content to -99999</span>

             <span class="c1"># Note: To clear down the stop price, set the content to -1</span>

             <span class="c1"># If modifying on behalf of another trader, set the order owner&#39;s UUID</span>
             <span class="c1">#request.set(&quot;EMSX_TRADER_UUID&quot;, 1234567)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 ModifyOrder.py
Bloomberg - EMSX API Example - ModifyOrderEx
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: ModifyOrderEx = {
    EMSX_SEQUENCE = 4747927
    EMSX_AMOUNT = 6000
    EMSX_ORDER_TYPE = MKT
    EMSX_TIF = DAY
    EMSX_TICKER = &quot;MSFT US Equity&quot;
    EMSX_INVESTOR_ID = &quot;InvID&quot;
}

Processing RESPONSE event
MESSAGE: ModifyOrderEx = {
    EMSX_SEQUENCE = 4747927
    MESSAGE = &quot;Order Modified&quot;
}

CORRELATION ID: 3
MESSAGE TYPE: ModifyOrderEx
EMSX_SEQUENCE: 4747927  MESSAGE: Order Modified
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="modify-route-extended-request">
<h2>Modify Route Extended Request<a class="headerlink" href="#modify-route-extended-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ModifyRouteEx</span></code> request modifies an existing or previously created child routes in EMSX&lt;GO&gt; or using EMSX API.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Please note, when modifying an order or route, the limit price can be positive or negative. (e.g. Futures spreads).
There are two special cases for setting the limit price to 0. In the <code class="docutils literal notranslate"><span class="pre">EMSX_LIMIT_PRICE</span></code> a value of 0 means to ignore the value.
A value of <code class="docutils literal notranslate"><span class="pre">EMSX_LIMIT_PRICE</span></code> = -99999 means to reset the <code class="docutils literal notranslate"><span class="pre">EMSX_LIMIT_PRICE</span></code> to 0.</p>
</div>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/ModifyRouteEx.cpp">Modify Route Extended cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/ModifyRouteEx.cs">Modify Route Extended cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/ModifyRouteEx.cls">Modify Route Extended vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/ModifyRouteEx.java">Modify Route Extended java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/ModifyRouteEx.py">Modify Route Extended py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111</pre></div></td><td class="code"><div class="highlight"><pre><span></span>      <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
     <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

     <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

         <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>

             <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

             <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

             <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;ModifyRouteEx&quot;</span><span class="p">)</span>

             <span class="c1"># The fields below are mandatory</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3834157</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ROUTE_ID&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
             <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>

             <span class="c1"># The fields below are optional</span>
             <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CLEARING_ACCOUNT&quot;, &quot;ClearingAcnt&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_CLEARING_FIRM&quot;, &quot;ClearingFirm&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_COMM_TYPE&quot;, &quot;Absolute&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_EXCHANGE_DESTINATION&quot;, &quot;DEST&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_GET_WARNINGS&quot;, &quot;0&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_GTD_DATE&quot;, &quot;20170105&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_LIMIT_PRICE&quot;, 123.45)</span>
             <span class="c1">#request.set(&quot;EMSX_LOC_BROKER&quot;, &quot;ABCD&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_LOC_ID&quot;, &quot;1234567&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_LOC_REQ&quot;, &quot;Y&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_NOTES&quot;, &quot;Some notes&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_ODD_LOT&quot;, &quot;&quot; )</span>
             <span class="c1">#request.set(&quot;EMSX_P_A&quot;, &quot;P&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1001)</span>
             <span class="c1">#request.set(&quot;EMSX_STOP_PRICE&quot;, 123.5)</span>
             <span class="c1">#request.set(&quot;EMSX_TRADER_NOTES&quot;, &quot;Trader notes&quot;)</span>
             <span class="c1">#request.set(&quot;EMSX_USER_COMM_RATE&quot;, 0.02)</span>
             <span class="c1">#request.set(&quot;EMSX_USER_FEES&quot;, &quot;1.5&quot;)</span>

             <span class="c1"># Note: When changing order type to a LMT order, you will need to provide the EMSX_LIMIT_PRICE value.</span>
             <span class="c1">#       When changing order type away from LMT order, you will need to reset the EMSX_LIMIT_PRICE value</span>
             <span class="c1">#       by setting the content to -99999</span>

             <span class="c1"># Note: To clear down the stop price, set the content to -1</span>

             <span class="c1"># Set the strategy parameters, if required</span>

             <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">             strategy = request.getElement(&quot;EMSX_STRATEGY_PARAMS&quot;)</span>
<span class="sd">             strategy.setElement(&quot;EMSX_STRATEGY_NAME&quot;, &quot;VWAP&quot;)</span>

<span class="sd">             indicator = strategy.getElement(&quot;EMSX_STRATEGY_FIELD_INDICATORS&quot;)</span>
<span class="sd">             data = strategy.getElement(&quot;EMSX_STRATEGY_FIELDS&quot;)</span>

<span class="sd">             # Strategy parameters must be appended in the correct order. See the output</span>
<span class="sd">             # of GetBrokerStrategyInfo request for the order. The indicator value is 0 for</span>
<span class="sd">             # a field that carries a value, and 1 where the field should be ignored</span>

<span class="sd">             data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;09:30:00&quot;) # StartTime</span>
<span class="sd">             indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 0)</span>

<span class="sd">             data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;10:30:00&quot;) # EndTime</span>
<span class="sd">             indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 0)</span>

<span class="sd">             data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)         # Max%Volume</span>
<span class="sd">             indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">             data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)         # %AMSession</span>
<span class="sd">             indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">             data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)         # OPG</span>
<span class="sd">             indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">             data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)         # MOC</span>
<span class="sd">             indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">             data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)         # CompletePX</span>
<span class="sd">             indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">             data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)         # TriggerPX</span>
<span class="sd">             indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">             data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)         # DarkComplete</span>
<span class="sd">             indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">             data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)         # DarkCompPX</span>
<span class="sd">             indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">             data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)         # RefIndex</span>
<span class="sd">             indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">             data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)         # Discretion</span>
<span class="sd">             indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>
<span class="sd">             &#39;&#39;&#39;</span>

             <span class="c1"># If modifying on behalf of another trader, set the order owner&#39;s UUID</span>
             <span class="c1">#request.set(&quot;EMSX_TRADER_UUID&quot;, 1234567)</span>

             <span class="c1"># If modifying a multi-leg route, indicate the Multileg ID</span>
             <span class="c1">#request.getElement(&quot;EMSX_REQUEST_TYPE&quot;).setChoice(&quot;Multileg&quot;).setElement(&quot;EMSX_ML_ID&quot;, &quot;123456&quot;)</span>

             <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

             <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

             <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

         <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
             <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 ModifyRouteEx.py
Bloomberg - EMSX API Example - ModifyRouteEx
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: ModifyRouteEx = {
    EMSX_SEQUENCE = 4747928
    EMSX_ROUTE_ID = 1
    EMSX_AMOUNT = 500
    EMSX_ORDER_TYPE = MKT
    EMSX_TIF = DAY
}

Processing RESPONSE event
MESSAGE: ModifyRouteEx = {
    EMSX_SEQUENCE = 0
    EMSX_ROUTE_ID = 0
    MESSAGE = &quot;Route modified&quot;
}

CORRELATION ID: 3
MESSAGE TYPE: ModifyRouteEx
MESSAGE: Route modified
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="route-extended-request">
<h2>Route Extended Request<a class="headerlink" href="#route-extended-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">RouteEx</span></code> request submits an existing order into various execution veneues. This request is used primarily to submit a child route based on previously created parent order.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="31%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/RouteEx.cpp">Route Extended cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/RouteEx.cs">Route Extended cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/RouteEx.cls">Route Extended vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/RouteEx.java">Route Extended java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/RouteEx.py">Route Extended py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</pre></div></td><td class="code"><div class="highlight"><pre><span></span>         <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
             <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

             <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

                 <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
                     <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

                     <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

                     <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;RouteEx&quot;</span><span class="p">)</span>

                     <span class="c1"># The fields below are mandatory</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3745217</span><span class="p">)</span> <span class="c1"># Order number</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span> <span class="s2">&quot;BB&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>

                     <span class="c1"># The fields below are optional</span>
                     <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
                     <span class="c1">##request.set(&quot;EMSX_CFD_FLAG&quot;, &quot;1&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_CLEARING_ACCOUNT&quot;, &quot;ClrAccName&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_CLEARING_FIRM&quot;, &quot;FirmName&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_EXEC_INSTRUCTIONS&quot;, &quot;AnyInst&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_GET_WARNINGS&quot;, &quot;0&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_GTD_DATE&quot;, &quot;20170105&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_LIMIT_PRICE&quot;, 123.45)</span>
                     <span class="c1">#request.set(&quot;EMSX_LOCATE_BROKER&quot;, &quot;BMTB&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_LOCATE_ID&quot;, &quot;SomeID&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_LOCATE_REQ&quot;, &quot;Y&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_NOTES&quot;, &quot;Some notes&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_ODD_LOT&quot;, &quot;0&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_P_A&quot;, &quot;P&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_RELEASE_TIME&quot;, 1259)</span>
                     <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1001)</span>
                     <span class="c1">#request.set(&quot;EMSX_ROUTE_REF_ID&quot;, &quot;UniqueRef&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_STOP_PRICE&quot;, 123.5)</span>
                     <span class="c1">#request.set(&quot;EMSX_TRADER_UUID&quot;, 1234567)</span>

                     <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

                     <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

                     <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

                 <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
                     <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Output:-</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\_scripts&gt;py -3 RouteEx.py
Bloomberg - EMSX API Example - RouteWithStrat
Connecting to localhost:8194
Processing SESSION_STATUS event
SessionConnectionUp = {
    server = &quot;localhost:8194&quot;
    encryptionStatus = &quot;Clear&quot;
}

Processing SESSION_STATUS event
Session started...
Processing SERVICE_STATUS event
Service opened...
Request: RouteEx = {
    EMSX_SEQUENCE = 4747927
    EMSX_AMOUNT = 200
    EMSX_BROKER = &quot;BB&quot;
    EMSX_HAND_INSTRUCTION = &quot;ANY&quot;
    EMSX_ORDER_TYPE = MKT
    EMSX_TICKER = &quot;MSFT US Equity&quot;
    EMSX_TIF = DAY
    EMSX_NOTES = &quot;Some notes&quot;
    EMSX_P_A = &quot;P&quot;
}

Processing RESPONSE event
MESSAGE: Route = {
    EMSX_SEQUENCE = 4747927
    EMSX_ROUTE_ID = 2
    MESSAGE = &quot;Order Routed&quot;
}

CORRELATION ID: 3
MESSAGE TYPE: Route
EMSX_SEQUENCE: 4747927  EMSX_ROUTE_ID: 2        MESSAGE: Order Routed
Processing SESSION_STATUS event
SessionConnectionDown = {
    server = &quot;localhost:8194&quot;
}

Processing SESSION_STATUS event
SessionTerminated = {
}
</pre></div>
</div>
</div>
<div class="section" id="route-manually-extended-request">
<h2>Route Manually Extended Request<a class="headerlink" href="#route-manually-extended-request" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">RouteManuallyEx</span></code> requestis generally used for phone orders where the placement is external to EMSX API. This request creates an order and notifies EMSX&lt;GO&gt; that this order is routed to the execution venue.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="31%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/RouteManually.cpp">Route Manually cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/RouteManually.cs">Route Manually cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/RouteManually.cls">Route Manually vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/RouteManually.java">Route Manually java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/RouteManually.py">Route Manually py</a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100</pre></div></td><td class="code"><div class="highlight"><pre><span></span>         <span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
             <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

             <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

                 <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
                     <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

                     <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

                     <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;RouteManuallyEx&quot;</span><span class="p">)</span>

                     <span class="c1"># The fields below are mandatory</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3745218</span><span class="p">)</span>  <span class="c1"># Order number</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span> <span class="s2">&quot;BB&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>
                     <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>

                     <span class="c1"># The fields below are optional</span>
                     <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_BOOKNAME&quot;,&quot;BookName&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_CFD_FLAG&quot;, &quot;1&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_CLEARING_ACCOUNT&quot;, &quot;ClrAccName&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_CLEARING_FIRM&quot;, &quot;FirmName&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_EXEC_INSTRUCTIONS&quot;, &quot;AnyInst&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_GET_WARNINGS&quot;, &quot;0&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_GTD_DATE&quot;, &quot;20170105&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_LIMIT_PRICE&quot;, 123.45)</span>
                     <span class="c1">#request.set(&quot;EMSX_LOCATE_BROKER&quot;, &quot;BMTB&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_LOCATE_ID&quot;, &quot;SomeID&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_LOCATE_REQ&quot;, &quot;Y&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_NOTES&quot;, &quot;Some notes&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_ODD_LOT&quot;, &quot;0&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_P_A&quot;, &quot;P&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_RELEASE_TIME&quot;, 1259)</span>
                     <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1001)</span>
                     <span class="c1">#request.set(&quot;EMSX_ROUTE_REF_ID&quot;, &quot;UniqueRef&quot;)</span>
                     <span class="c1">#request.set(&quot;EMSX_STOP_PRICE&quot;, 123.5)</span>
                     <span class="c1">#request.set(&quot;EMSX_TRADER_UUID&quot;, 1234567)</span>

                     <span class="c1"># Below we establish the strategy details</span>
                     <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">                     strategy = request.getElement(&quot;EMSX_STRATEGY_PARAMS&quot;)</span>
<span class="sd">                     strategy.setElement(&quot;EMSX_STRATEGY_NAME&quot;, &quot;VWAP&quot;)</span>

<span class="sd">                     indicator = strategy.getElement(&quot;EMSX_STRATEGY_FIELD_INDICATORS&quot;)</span>
<span class="sd">                     data = strategy.getElement(&quot;EMSX_STRATEGY_FIELDS&quot;)</span>

<span class="sd">                     # Strategy parameters must be appended in the correct order. See the output</span>
<span class="sd">                     # of GetBrokerStrategyInfo request for the order. The indicator value is 0 for</span>
<span class="sd">                     # a field that carries a value, and 1 where the field should be ignored</span>

<span class="sd">                     data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;09:30:00&quot;)  # StartTime</span>
<span class="sd">                     indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 0)</span>

<span class="sd">                     data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;10:30:00&quot;)   # EndTime</span>
<span class="sd">                     indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 0)</span>

<span class="sd">                     data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # Max%Volume</span>
<span class="sd">                     indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">                     data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # %AMSession</span>
<span class="sd">                     indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">                     data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # OPG</span>
<span class="sd">                     indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">                     data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # MOC</span>
<span class="sd">                     indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">                     data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # CompletePX</span>
<span class="sd">                     indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">                     data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # TriggerPX</span>
<span class="sd">                     indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">                     data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # DarkComplete</span>
<span class="sd">                     indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">                     data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # DarkCompPX</span>
<span class="sd">                     indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">                     data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # RefIndex</span>
<span class="sd">                     indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">                     data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # Discretion</span>
<span class="sd">                     indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>
<span class="sd">                     &#39;&#39;&#39;</span>

                     <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

                     <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

                     <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

                 <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
                     <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="requestResponseSs.html" class="btn btn-neutral float-right" title="Sell-Side Request/Response Service" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="description.html" class="btn btn-neutral" title="Description of Request/Response Service" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Terrence C. Kim

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>